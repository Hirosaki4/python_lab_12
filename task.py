import pprint

# Завдання 1: Список товарів
inventory = [
    {"назва": "Ноутбук", "кількість": 10, "ціна": 20000, "категорія": "електроніка"},
    {"назва": "Смартфон", "кількість": 25, "ціна": 15000, "категорія": "електроніка"},
    {"назва": "Футболка", "кількість": 50, "ціна": 400, "категорія": "одяг"},
    {"назва": "Кросівки", "кількість": 20, "ціна": 1200, "категорія": "одяг"},
    {"назва": "Хліб", "кількість": 100, "ціна": 25, "категорія": "продукти"},
    {"назва": "Молоко", "кількість": 30, "ціна": 35, "категорія": "продукти"},
    {"назва": "Пральна машина", "кількість": 5, "ціна": 8000, "категорія": "електроніка"},
]

# Вивід у вигляді таблиці
print(f"{'Назва':<20}{'Кількість':<10}{'Ціна':<10}{'Категорія'}")
for item in inventory:
    print(f"{item['назва']:<20}{item['кількість']:<10}{item['ціна']:<10}{item['категорія']}")

# Завдання 2: Пошук та редагування
def пошук_та_редагування(інвентар):
    пошук = input("\nВведіть назву або категорію для пошуку: ").strip().lower()
    знайдено = [item for item in інвентар if пошук in item['назва'].lower() or пошук in item['категорія'].lower()]
    
    if not знайдено:
        print("Нічого не знайдено.")
        return

    for i, товар in enumerate(знайдено, 1):
        print(f"\n{i}. {товар}")
    
    try:
        номер = int(input("\nОберіть номер товару для оновлення: "))
        if номер < 1 or номер > len(знайдено):
            print("Некоректний номер.")
            return

        поле = input("Оновити 'кількість' або 'ціну'? ").strip().lower()
        if поле not in ["кількість", "ціна"]:
            print("Неправильне поле.")
            return

        нове_значення = input("Введіть нове значення: ")
        if not нове_значення.isdigit():
            print("Значення повинно бути числом.")
            return

        знайдено[номер - 1][поле] = int(нове_значення)
        print("Оновлено успішно.")

    except Exception as e:
        print("Помилка:", e)

# Завдання 3: Аналітика
def аналітика(інвентар):
    статистика = {}
    для_замовлення = []

    for item in інвентар:
        вартість = item['кількість'] * item['ціна']
        cat = item['категорія']
        статистика[cat] = статистика.get(cat, 0) + вартість
        if item['кількість'] < 5:
            для_замовлення.append(item)

    print("\nЗагальна вартість по категоріях:")
    for cat, total in статистика.items():
        print(f"- {cat}: {total} грн")

    max_cat = max(статистика, key=статистика.get)
    print(f"\nКатегорія з найбільшою вартістю: {max_cat} ({статистика[max_cat]} грн)")

    print("\nТовари, які потребують замовлення (кількість < 5):")
    for item in для_замовлення:
        print(f"- {item['назва']} ({item['кількість']} шт)")

# Основна програма
while True:
    print("\n--- Меню ---")
    print("1. Показати інвентар")
    print("2. Пошук та редагування")
    print("3. Аналітика")
    print("4. Вихід")
    вибір = input("Оберіть дію: ")

    if вибір == "1":
        print(f"{'Назва':<20}{'Кількість':<10}{'Ціна':<10}{'Категорія'}")
        for item in inventory:
            print(f"{item['назва']:<20}{item['кількість']:<10}{item['ціна']:<10}{item['категорія']}")
    elif вибір == "2":
        пошук_та_редагування(inventory)
    elif вибір == "3":
        аналітика(inventory)
    elif вибір == "4":
        break
    else:
        print("Некоректний вибір.")
